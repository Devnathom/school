<%- include('../partials/header', { title, page }) %>
<div class="content-header"><div class="container-fluid"><h1><i class="fas fa-book mr-2"></i>จัดการรายวิชา</h1></div></div>
<section class="content"><div class="container-fluid">
<div class="card">
  <div class="card-header"><button class="btn btn-primary btn-sm" data-toggle="modal" data-target="#addModal"><i class="fas fa-plus"></i> เพิ่มรายวิชา</button></div>
  <div class="card-body">
    <table class="table table-bordered datatable">
      <thead><tr><th>รหัส</th><th>ชื่อวิชา</th><th>หน่วยกิต</th><th>แผนก</th><th>จัดการ</th></tr></thead>
      <tbody>
        <% subjects.forEach(function(s) { %>
        <tr><td><%= s.code %></td><td><%= s.name %></td><td><%= s.credits %></td><td><%= s.department || '-' %></td>
        <td><button onclick="confirmDelete('/subjects/delete/<%= s.id %>', '<%= s.name %>')" class="btn btn-sm btn-danger"><i class="fas fa-trash"></i></button></td></tr>
        <% }); %>
      </tbody>
    </table>
  </div>
</div>
</div></section>
<div class="modal fade" id="addModal"><div class="modal-dialog"><div class="modal-content">
<form action="/subjects/add" method="POST">
  <div class="modal-header"><h5 class="modal-title">เพิ่มรายวิชา</h5><button type="button" class="close" data-dismiss="modal">&times;</button></div>
  <div class="modal-body">
    <div class="form-group"><label>รหัสวิชา</label><input type="text" name="code" class="form-control" required></div>
    <div class="form-group"><label>ชื่อวิชา</label><input type="text" name="name" class="form-control" required></div>
    <div class="form-group"><label>หน่วยกิต</label><input type="number" name="credits" class="form-control" value="1"></div>
    <div class="form-group"><label>แผนก</label><input type="text" name="department" class="form-control"></div>
  </div>
  <div class="modal-footer"><button type="submit" class="btn btn-primary">บันทึก</button></div>
</form>
</div></div></div>
<%- include('../partials/footer', { success: null, error: null }) %>
